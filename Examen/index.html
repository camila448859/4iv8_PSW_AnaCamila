<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="CSS/style.css">
    
    <title>Mesa dinámica</title>
</head>
<body>

    <div>

        <form >
            <div class="titulopagina title">Tabla Dinamica Para el Calculo de Intereses</div>
            <div class="titulosecundario title">Cálculo de interés compuesto para la compra de un automóvil.</div>
            <input type="text" class="valor formEntry"  id="valaut" onchange="return valinicial(this);" placeholder="Valor Original Automovil" maxlength="10">
            <input type="text" class="valor formEntry"  id="eng" onchange="return valenganche(this);" placeholder="Enganche Inicial">
            <div class="">
                <h3>Seleccionar periodo de pagos:</h3>
                <ul>
                    <li>
                        <input type="radio" name='meses' id="m3" name="fav_language" value="3">
                        <label for="m3">3 Meses</label>
                        <div class="radio_demo"></div>
                    </li>
                    <li>
                        <input type="radio" name='meses' id="m6" name="fav_language" value="6">
                        <label for="m6">6 Meses</label>
                        <div class="radio_demo"></div>
                    </li>
                    <li>
                        <input type="radio" name='meses' id="m9" name="fav_language" value="9">
                        <label for="m9">9 Meses</label>
                        <div class="radio_demo"></div>
                    </li>
                    <li>
                        <input type="radio" name='meses' id="m12" name="fav_language" value="12">
                        <label for="m12">12 Meses</label>
                        <div class="radio_demo"></div>
                    </li>
                    <li>
                        <input type="radio" name='meses' id="m18" name="fav_language" value="18">
                        <label for="m18">18 Meses</label>
                        <div class="radio_demo"></div>
                    </li>
                </ul>
            </div>
        </form>
        
        <input class="formEntry" type="button" id="add" value="Añadir">
    </div>

    <table>
        <caption>Información del Credito</caption>
        <tbody>
            <tr>
                <th>Valor Original Automovil</th>
                <th>Enganche Inicial</th>
                <th>Cantidad Financiada</th>
                <th>Perido Seleccionado</th>
                <th>Interes</th>
                <th>Valor Futuro del Crédito</th>
                <th>Cuota</th>
                <th>Eliminar</th>
            </tr>
        </tbody>
        
    </table>

    <script>
        //Validación valini
        function valinicial(elemento){
            var numero = parseInt(elemento.value,10);
            //Validamos que se haya ingresado solo numeros
            if(isNaN(numero)){
                alert('Ingrese solo números.');
                elemento.focus();
                elemento.select();
                return;
            }
            //Validamos que se cumpla el rango
            if(numero<100000 || numero>1000000){
                alert('Ingresar valor entre 100 mil y 1 millon');
                elemento.focus();
                return false;
            }
            return true;
        }

        //Validación enganche
        function valenganche(elemento){
            
            var numero = parseInt(elemento.value,10);
            //Validamos que se haya ingresado solo numeros
            if(isNaN(numero)){
                alert('Ingrese solo números.');
                elemento.focus();
                elemento.select();
                return;
            }
            //Validamos que se cumpla el rango
            if(numero<(document.getElementById("valaut").value)*0.1){
                alert('Enganche Minimo del 10% del valor inicial');
                elemento.focus();
                return false;
            }
            return true;
        }
        
        // Agrega un evento de clic al botón
        document.getElementById("add").onclick = function () {
            
            // Obtiene el valor del cuadro de entrada
            var valini = document.getElementById("valaut").value;
            var enganche = document.getElementById("eng").value;
            var periodo = document.querySelector("input[name=meses]:checked").value;

            if(valini == ""){
                alert("Ingresar valor inicial");
                return;
            }

            if(enganche == ""){
                alert("Ingresar Enganche");
                return;
            }


            //Valor Inicial
            // Para instalar id en td, primero cree el nodo td
            var td_valini_node = document.createElement("td");
            // El valor ingresado es texto, no un nodo. Si desea agregarlo a través de un nodo, debe convertirse en un nodo de texto
            var valini_text_node = document.createTextNode(valini);
            // Agregar nodo de identificación
            td_valini_node.appendChild(valini_text_node);

            //Enganche
            // Para cargar el nombre en td, primero cree el nodo td
            var td_enganche_node = document.createElement("td");
            // El valor ingresado es texto, no un nodo. Si desea agregarlo a través de un nodo, debe convertirse en un nodo de texto
            var enganche_text_node = document.createTextNode(enganche);
            // Agregar nombre de nodo
            td_enganche_node.appendChild(enganche_text_node);

            //Cantidad Financiada 
            // Para cargar el nombre en td, primero cree el nodo td
            var td_finan_node = document.createElement("td");
            // El valor ingresado es texto, no un nodo. Si desea agregarlo a través de un nodo, debe convertirse en un nodo de texto
            var finan_text_node = document.createTextNode(valini - enganche);
            // Agregar nombre de nodo
            td_finan_node.appendChild(finan_text_node);

            //Periodo Meses
            // Para cargar sexo en td, primero crea un nodo td
            var td_periodo_node = document.createElement("td");
            // El valor ingresado es texto, no un nodo. Si desea agregarlo a través de un nodo, debe convertirse en un nodo de texto
            var periodo_text_node = document.createTextNode(periodo);
            // Agregar nodo sexual
            td_periodo_node.appendChild(periodo_text_node);

            //Interes
            // Para cargar sexo en td, primero crea un nodo td
            var td_int_node = document.createElement("td");
            // El valor ingresado es texto, no un nodo. Si desea agregarlo a través de un nodo, debe convertirse en un nodo de texto
            var int_text_node = document.createTextNode('3.94%');
            // Agregar nodo sexual
            td_int_node.appendChild(int_text_node);

            //Valor futuro credito
            var cuot = (valini-enganche)*(1+(0.0394*periodo));
            var fvalfut = cuot.toFixed(2);
            // Para cargar sexo en td, primero crea un nodo td
            var td_valfut_node = document.createElement("td");
            // El valor ingresado es texto, no un nodo. Si desea agregarlo a través de un nodo, debe convertirse en un nodo de texto
            var valfut_text_node = document.createTextNode('$'+fvalfut);
            // Agregar nodo sexual
            td_valfut_node.appendChild(valfut_text_node);

            //Cuota
            var fcuot = cuot/periodo;
            fcuot = fcuot.toFixed(2);
            // Para cargar sexo en td, primero crea un nodo td
            var td_cuota_node = document.createElement("td");
            // El valor ingresado es texto, no un nodo. Si desea agregarlo a través de un nodo, debe convertirse en un nodo de texto
            var cuota_text_node = document.createTextNode('$'+z);
            // Agregar nodo sexual
            td_cuota_node.appendChild(cuota_text_node);


            // Eliminar para instalar en td, pero no, así que cree un hipervínculo primero y luego agregue un nodo de texto "eliminar"
            var ele_a = document.createElement("a");
            // Establecer el atributo href
            ele_a.setAttribute("href","javascript:void(0);");
            // Establecer el atributo onclick
            ele_a.setAttribute("onclick","del_tr(this);");
            // Convertir eliminar en un nodo de texto
            var del_node = document.createTextNode("Eliminar");
            // Realizar hipervínculo
            ele_a.appendChild(del_node);
            // Crear nodo td
            var td_del_node = document.createElement("td");
            // Agregar eliminar hipervínculo
            td_del_node.appendChild(ele_a);

            // Agrega 4 td a tr, tr no lo es, crea tr primero
            var tr_node = document.createElement("tr");
            // tr agregar td
            tr_node.appendChild(td_valini_node);
            tr_node.appendChild(td_enganche_node);
            tr_node.appendChild(td_finan_node);
            tr_node.appendChild(td_periodo_node);
            tr_node.appendChild(td_int_node);
            tr_node.appendChild(td_valfut_node);
            tr_node.appendChild(td_cuota_node);
            tr_node.appendChild(td_del_node);

            // tabla agrega tr, hay una tabla, para convertirse en un nodo
            var table_node = document.getElementsByTagName("table")[0];
            table_node.appendChild(tr_node);
        }
        del_tr = function (obj) {// Devuelto es el objeto de la etiqueta a
            // Eliminar nodos secundarios a través del nodo principal
            // Elimina tr a través de la tabla, obtén el nodo de la tabla primero
            var table_node = obj.parentNode.parentNode.parentNode;
            table_node.removeChild(obj.parentNode.parentNode);
        }
    </script>
</body>
</html>